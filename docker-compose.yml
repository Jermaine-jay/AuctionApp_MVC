version: '3.4'

services:

    app_database:
        image: postgres:latest
        container_name: app_db
        environment:
          - POSTGRES_USER=auctionappdb_user
          - POSTGRES_PASSWORD=kBLrfdrkDiFVt6KjYxoUT5QonZVgedsj
          - POSTGRES_DB=auctionappdb
        ports:
          - 5432:5433

        restart: always
 
    aunctionappmvc:
        image: ${DOCKER_REGISTRY-}aunctionappmvc
        build:
          context: .
          dockerfile: AunctionAppMVC/Dockerfile

        depends_on:
            - "app_database"
        environment: 
             - ConnectionStrings:DefaultConnection="Host=dpg-clo79veqc21c73e3uf20-a;Database=auctionappdb;Username=auctionappdb_user;Password=kBLrfdrkDiFVt6KjYxoUT5QonZVgedsj;Port=5432;"
             